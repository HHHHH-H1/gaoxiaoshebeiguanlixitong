# é«˜æ ¡è®¾å¤‡ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŸºäºNode.js + Express + MySQLçš„ç°ä»£åŒ–è®¾å¤‡ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå¤šè§’è‰²ç”¨æˆ·ç®¡ç†ã€è®¾å¤‡å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€é¢„çº¦ç³»ç»Ÿã€ç»´ä¿®ç®¡ç†å’Œæ•°æ®ç»Ÿè®¡åˆ†æã€‚

## ğŸš€ ç³»ç»Ÿç‰¹æ€§

### ç”¨æˆ·ç®¡ç†
- âœ… å¤šè§’è‰²æ”¯æŒï¼šç®¡ç†å‘˜ã€æ•™å¸ˆã€å­¦ç”Ÿ
- âœ… å®‰å…¨è®¤è¯ï¼šå¯†ç åŠ å¯†ã€éªŒè¯ç é˜²æš´åŠ›ç ´è§£
- âœ… æƒé™æ§åˆ¶ï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶(RBAC)
- âœ… è´¦æˆ·ç®¡ç†ï¼šå†»ç»“/è§£å†»ã€å¯†ç é‡ç½®
- âœ… å®æ—¶çŠ¶æ€ï¼šæ˜¾ç¤ºç”¨æˆ·è§’è‰²ã€å§“åã€æœ€åç™»å½•æ—¶é—´

### è®¾å¤‡ç®¡ç†
- âœ… å®Œæ•´ä¿¡æ¯ï¼šè®¾å¤‡ç¼–å·ã€åç§°ã€å‹å·ã€è´­ç½®æ—¥æœŸã€å­˜æ”¾ä½ç½®
- âœ… åˆ†ç±»ç®¡ç†ï¼šæ•™å­¦è®¾å¤‡ã€ç§‘ç ”è®¾å¤‡ã€åŠå…¬è®¾å¤‡
- âœ… çŠ¶æ€ç®¡ç†ï¼šè¿è¡Œä¸­(ç»¿)ã€ç»´ä¿®ä¸­(çº¢)ã€å¾…æ¸…æ´(é»„)ã€å°å­˜(ç°)
- âœ… ç”µå­æ¡£æ¡ˆï¼šæ”¯æŒå›¾ç‰‡/PDFæ–‡æ¡£ä¸Šä¼ 
- âœ… æ™ºèƒ½æœç´¢ï¼šæ”¯æŒæ‹¼éŸ³é¦–å­—æ¯æœç´¢ï¼ˆå¦‚"æ˜¾å¾®é•œ"â†’"xwj"ï¼‰

### é¢„çº¦ç³»ç»Ÿ
- âœ… åœ¨çº¿é¢„çº¦ï¼šå­¦ç”Ÿæäº¤è®¾å¤‡ä½¿ç”¨ç”³è¯·
- âœ… å®¡æ‰¹æµç¨‹ï¼šæ•™å¸ˆ/ç®¡ç†å‘˜å®¡æ‰¹
- âœ… æ—¶é—´å†²çªæ£€æµ‹ï¼šè‡ªåŠ¨é˜²æ­¢é‡å¤é¢„çº¦
- âœ… çŠ¶æ€è·Ÿè¸ªï¼šå¾…å®¡æ‰¹ã€å·²æ‰¹å‡†ã€å·²æ‹’ç»ã€å·²å®Œæˆ

### ç»´ä¿®ç®¡ç†
- âœ… æ•…éšœæŠ¥ä¿®ï¼šç”¨æˆ·æäº¤è®¾å¤‡æ•…éšœæŠ¥å‘Š
- âœ… è¿›åº¦è·Ÿè¸ªï¼šå¾…å¤„ç†ã€å¤„ç†ä¸­ã€å·²å®Œæˆ
- âœ… è¯¦ç»†è®°å½•ï¼šæ•…éšœæè¿°ã€ç»´ä¿®äººå‘˜ã€é¢„è®¡å®Œæˆæ—¶é—´
- âœ… ä¼˜å…ˆçº§ç®¡ç†ï¼šä½ã€ä¸­ã€é«˜ã€ç´§æ€¥

### æ•°æ®ç»Ÿè®¡
- âœ… è®¾å¤‡åˆ©ç”¨ç‡ï¼šè®¡ç®—æ—¥å‡ä½¿ç”¨æ—¶é•¿/é—²ç½®ç‡
- âœ… æ•…éšœçƒ­åŠ›å›¾ï¼šæŒ‰è®¾å¤‡ç±»å‹/éƒ¨é—¨ç»Ÿè®¡æ•…éšœé¢‘ç‡
- âœ… ä½¿ç”¨è¶‹åŠ¿ï¼šæ—¶é—´åºåˆ—æ•°æ®åˆ†æ
- âœ… çƒ­é—¨è®¾å¤‡æ’è¡Œï¼šä½¿ç”¨é¢‘ç‡ç»Ÿè®¡

### æ•°æ®å¯¼å‡º
- âœ… CSVæ ¼å¼å¯¼å‡ºï¼šæ”¯æŒè®¾å¤‡ã€é¢„çº¦ã€ç»´ä¿®æ•°æ®å¯¼å‡º
- âœ… ä¸­æ–‡ç¼–ç æ”¯æŒï¼šUTF-8 BOMæ ¼å¼

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

**åç«¯**
- Node.js 18+
- Express.js - Webæ¡†æ¶
- MySQL 8.0+ - æ•°æ®åº“
- Sequelize - ORMæ¡†æ¶
- bcryptjs - å¯†ç åŠ å¯†
- express-session - ä¼šè¯ç®¡ç†
- express-validator - æ•°æ®éªŒè¯
- multer - æ–‡ä»¶ä¸Šä¼ 
- canvas - éªŒè¯ç ç”Ÿæˆ

**å‰ç«¯**
- åŸç”ŸJavaScript (ES6+)
- CSS3 + å“åº”å¼è®¾è®¡
- Font Awesome - å›¾æ ‡åº“
- Animate.css - åŠ¨ç”»åº“

**å®‰å…¨ç‰¹æ€§**
- Helmet.js - å®‰å…¨å¤´è®¾ç½®
- é™æµä¿æŠ¤ - é˜²æ­¢æš´åŠ›ç ´è§£
- CORSé…ç½® - è·¨åŸŸèµ„æºå…±äº«
- è¾“å…¥éªŒè¯ - é˜²æ­¢SQLæ³¨å…¥/XSS

## ğŸ“¦ å®‰è£…éƒ¨ç½²

### 1. ç¯å¢ƒè¦æ±‚

```bash
Node.js >= 18.0.0
MySQL >= 8.0.0
npm >= 9.0.0
```

### 2. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd equipment-management-system
```

### 3. å®‰è£…ä¾èµ–

```bash
npm install
```

### 4. æ•°æ®åº“é…ç½®

ä¿®æ”¹ `config/database.js` ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼š

```javascript
{
  username: 'your_mysql_username',
  password: 'your_mysql_password', 
  database: 'equipment_management',
  host: 'localhost',
  port: 3306
}
```

### 5. åˆ›å»ºæ•°æ®åº“

```sql
CREATE DATABASE equipment_management CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 6. åˆå§‹åŒ–æ•°æ®åº“

```bash
npm run init-db
```

è¿™å°†åˆ›å»ºæ‰€æœ‰è¡¨ç»“æ„å¹¶æ’å…¥åˆå§‹æ•°æ®ï¼ŒåŒ…æ‹¬ï¼š
- é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ï¼š`admin` / `admin123`
- ç¤ºä¾‹æ•™å¸ˆè´¦æˆ·ï¼š`teacher001` / `teacher123`
- ç¤ºä¾‹å­¦ç”Ÿè´¦æˆ·ï¼š`student001` / `student123`
- ç¤ºä¾‹è®¾å¤‡æ•°æ®

### 7. å¯åŠ¨æœåŠ¡å™¨

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨

## ğŸ“± ç³»ç»Ÿä½¿ç”¨

### ç™»å½•ç³»ç»Ÿ
1. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`
2. ä½¿ç”¨é»˜è®¤è´¦æˆ·ç™»å½•ï¼š
   - ç®¡ç†å‘˜ï¼š`admin` / `admin123`
   - æ•™å¸ˆï¼š`teacher001` / `teacher123`
   - å­¦ç”Ÿï¼š`student001` / `student123`
3. è¾“å…¥éªŒè¯ç å®Œæˆç™»å½•

### è®¾å¤‡ç®¡ç†
- **æŸ¥çœ‹è®¾å¤‡**ï¼šåœ¨è®¾å¤‡ç®¡ç†é¡µé¢æŸ¥çœ‹æ‰€æœ‰è®¾å¤‡ä¿¡æ¯
- **æœç´¢è®¾å¤‡**ï¼šæ”¯æŒè®¾å¤‡ç¼–å·ã€åç§°ã€å‹å·æœç´¢ï¼Œæ”¯æŒæ‹¼éŸ³é¦–å­—æ¯
- **ç­›é€‰è®¾å¤‡**ï¼šæŒ‰çŠ¶æ€ã€ç±»å‹ã€ä½ç½®ç­›é€‰
- **è®¾å¤‡è¯¦æƒ…**ï¼šç‚¹å‡»æŸ¥çœ‹æŒ‰é’®æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
- **æŠ¥ä¿®è®¾å¤‡**ï¼šç‚¹å‡»ç»´ä¿®æŒ‰é’®æäº¤æ•…éšœæŠ¥å‘Š

### é¢„çº¦ç®¡ç†
- **åˆ›å»ºé¢„çº¦**ï¼šé€‰æ‹©è®¾å¤‡å’Œæ—¶é—´æ®µæäº¤é¢„çº¦ç”³è¯·
- **å®¡æ‰¹é¢„çº¦**ï¼šæ•™å¸ˆ/ç®¡ç†å‘˜å®¡æ‰¹é¢„çº¦ç”³è¯·
- **æŸ¥çœ‹é¢„çº¦**ï¼šæŸ¥çœ‹é¢„çº¦çŠ¶æ€å’Œå†å²è®°å½•

### ç»´ä¿®ç®¡ç†
- **æäº¤æŠ¥ä¿®**ï¼šæè¿°æ•…éšœæƒ…å†µå’Œä¼˜å…ˆçº§
- **å¤„ç†æŠ¥ä¿®**ï¼šç®¡ç†å‘˜åˆ†é…ç»´ä¿®äººå‘˜å’Œå¤„ç†è¿›åº¦
- **è·Ÿè¸ªè¿›åº¦**ï¼šå®æ—¶æŸ¥çœ‹ç»´ä¿®çŠ¶æ€

### æ•°æ®ç»Ÿè®¡
- **è®¾å¤‡ç»Ÿè®¡**ï¼šæ€»æ•°ã€è¿è¡Œä¸­ã€ç»´ä¿®ä¸­ç­‰çŠ¶æ€ç»Ÿè®¡
- **åˆ©ç”¨ç‡åˆ†æ**ï¼šè®¾å¤‡ä½¿ç”¨é¢‘ç‡å’Œæ—¶é•¿ç»Ÿè®¡
- **æ•…éšœåˆ†æ**ï¼šæ•…éšœé¢‘ç‡å’Œç±»å‹åˆ†å¸ƒ
- **è¶‹åŠ¿åˆ†æ**ï¼šæ—¶é—´åºåˆ—æ•°æ®åˆ†æ

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰ï¼š

```env
NODE_ENV=development
DB_HOST=localhost
DB_PORT=3306
DB_USERNAME=root
DB_PASSWORD=1234qwer
DB_NAME=equipment_management
SESSION_SECRET=your-secret-key
```

### ä¸Šä¼ é…ç½®

æ–‡ä»¶ä¸Šä¼ é™åˆ¶ï¼š
- æ–‡ä»¶å¤§å°ï¼šæœ€å¤§5MB
- æ”¯æŒæ ¼å¼ï¼šJPG, PNG, PDF, DOC, DOCX
- å­˜å‚¨è·¯å¾„ï¼š`uploads/equipment/`

### å®‰å…¨é…ç½®

- ä¼šè¯è¿‡æœŸæ—¶é—´ï¼š24å°æ—¶
- ç™»å½•é™æµï¼šæ¯IPæ¯15åˆ†é’Ÿæœ€å¤š5æ¬¡å°è¯•
- APIé™æµï¼šæ¯IPæ¯15åˆ†é’Ÿæœ€å¤š100æ¬¡è¯·æ±‚
- å¯†ç å¼ºåº¦ï¼š6-20ä¸ªå­—ç¬¦

## ğŸ“Š æ•°æ®åº“ç»“æ„

### ä¸»è¦æ•°æ®è¡¨

- `users` - ç”¨æˆ·è¡¨
- `equipment` - è®¾å¤‡è¡¨
- `equipment_usage` - è®¾å¤‡ä½¿ç”¨è®°å½•è¡¨
- `reservations` - é¢„çº¦è®°å½•è¡¨
- `maintenance` - ç»´ä¿®è®°å½•è¡¨
- `system_logs` - ç³»ç»Ÿæ—¥å¿—è¡¨

è¯¦ç»†çš„æ•°æ®åº“ç»“æ„è¯·å‚è€ƒ `models/index.js`

## ğŸ¯ APIæ–‡æ¡£

### è®¤è¯ç›¸å…³
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º
- `GET /api/auth/captcha` - è·å–éªŒè¯ç 

### è®¾å¤‡ç®¡ç†
- `GET /api/equipment` - è·å–è®¾å¤‡åˆ—è¡¨
- `POST /api/equipment` - åˆ›å»ºè®¾å¤‡
- `PUT /api/equipment/:id` - æ›´æ–°è®¾å¤‡
- `DELETE /api/equipment/:id` - åˆ é™¤è®¾å¤‡
- `GET /api/equipment/export/csv` - å¯¼å‡ºè®¾å¤‡æ•°æ®

### é¢„çº¦ç®¡ç†
- `GET /api/reservation` - è·å–é¢„çº¦åˆ—è¡¨
- `POST /api/reservation` - åˆ›å»ºé¢„çº¦
- `PUT /api/reservation/:id/approve` - å®¡æ‰¹é¢„çº¦

### ç»´ä¿®ç®¡ç†
- `GET /api/maintenance` - è·å–ç»´ä¿®åˆ—è¡¨
- `POST /api/maintenance` - åˆ›å»ºç»´ä¿®è®°å½•
- `PUT /api/maintenance/:id` - æ›´æ–°ç»´ä¿®çŠ¶æ€

### ç»Ÿè®¡åˆ†æ
- `GET /api/statistics/equipment` - è®¾å¤‡ç»Ÿè®¡
- `GET /api/statistics/reservations` - é¢„çº¦ç»Ÿè®¡
- `GET /api/statistics/utilization` - åˆ©ç”¨ç‡ç»Ÿè®¡

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦å¯åŠ¨
   - éªŒè¯æ•°æ®åº“é…ç½®ä¿¡æ¯
   - ç¡®è®¤æ•°æ®åº“ç”¨æˆ·æƒé™

2. **éªŒè¯ç ä¸æ˜¾ç¤º**
   - ç¡®ä¿å®‰è£…äº†canvasä¾èµ–
   - æ£€æŸ¥ç³»ç»Ÿå­—ä½“æ”¯æŒ

3. **æ–‡ä»¶ä¸Šä¼ å¤±è´¥**
   - æ£€æŸ¥uploadsç›®å½•æƒé™
   - ç¡®è®¤æ–‡ä»¶å¤§å°å’Œæ ¼å¼é™åˆ¶

4. **ç«¯å£è¢«å ç”¨**
   ```bash
   # æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
   netstat -an | findstr 3000
   
   # ä¿®æ”¹ç«¯å£
   set PORT=3001 && npm start
   ```

### æ—¥å¿—æŸ¥çœ‹

ç³»ç»Ÿæ—¥å¿—å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œç®¡ç†å‘˜å¯ä»¥é€šè¿‡ `/api/user/logs` æ¥å£æŸ¥çœ‹ï¼š
- ç”¨æˆ·æ“ä½œæ—¥å¿—
- ç³»ç»Ÿé”™è¯¯æ—¥å¿—
- å®‰å…¨äº‹ä»¶æ—¥å¿—

## ğŸ”„ ç³»ç»Ÿæ›´æ–°

### æ•°æ®åº“è¿ç§»

å½“æ•°æ®åº“ç»“æ„å‘ç”Ÿå˜åŒ–æ—¶ï¼š

```bash
# å¤‡ä»½ç°æœ‰æ•°æ®
mysqldump -u username -p equipment_management > backup.sql

# è¿è¡Œè¿ç§»ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
npm run init-db

# æ¢å¤æ•°æ®ï¼ˆå¦‚éœ€è¦ï¼‰
mysql -u username -p equipment_management < backup.sql
```

### ç‰ˆæœ¬å‡çº§

```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# æ›´æ–°ä¾èµ–
npm install

# é‡å¯æœåŠ¡
npm restart
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Œè¯·ï¼š
1. æŸ¥çœ‹[å¸¸è§é—®é¢˜](#æ•…éšœæ’é™¤)
2. æäº¤[Issue](issues)
3. è”ç³»å¼€å‘å›¢é˜Ÿ

---

**å¼€å‘è€…**: ç³»ç»Ÿå¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2024å¹´  
**ç‰ˆæœ¬**: 1.0.0 